containers:
  default:
    docker: circleci/ruby:2.5.1-node-browsers

steps:
  - label: Lint
    timeout: 5m
    run:
      - bundle exec rubocop
    dependencies:
      - bundler
  - label: 'Run Test Suite (:kubernetes: 1.14-latest)'
    command: bin/ci
    agents:
      queue: k8s-ci
    env:
      LOGGING_LEVEL: 4
      KUBERNETES_VERSION: v1.14-latest
